#ifndef STUDENT_TASKS_H
#define STUDENT_TASKS_H
#include <stdbool.h>
#include <stddef.h>

#ifdef __cplusplus
extern "C" {
#endif

// ============== ПРОСТЫЕ ЗАДАНИЯ (15 заданий, 0.5-1.5 балла) ==============

/* Задание 1: Сумма элементов массива (0.5 балла)
 * Пример: arraySum([1,2,3,4,5], 5) -> 15
 */
int arraySum(const int *arr, int size);

/* Задание 2: Максимальный элемент массива (0.5 балла)
 * Пример: arrayMax([3,1,4,1,5], 5) -> 5
 */
int arrayMax(const int *arr, int size);

/* Задание 3: Минимальный элемент массива (0.5 балла)
 * Пример: arrayMin([3,1,4,1,5], 5) -> 1
 */
int arrayMin(const int *arr, int size);

/* Задание 4: Разворот массива на месте (0.5 балла)
 * Пример: arrayReverse([1,2,3,4,5], 5) -> [5,4,3,2,1]
 */
void arrayReverse(int *arr, int size);

/* Задание 5: Подсчитать чётные числа в массиве (0.5 балла)
 * Пример: countEven([1,2,3,4,6], 5) -> 3
 */
int countEven(const int *arr, int size);

/* Задание 6: Поиск элемента в массиве (0.5 балла)
 * Возвращает индекс первого вхождения или -1
 * Пример: arrayFind([10,20,30], 3, 20) -> 1
 */
int arrayFind(const int *arr, int size, int value);

/* Задание 7: Копирование массива (0.5 балла)
 * Скопировать size элементов из src в dest
 * Пример: arrayCopy(dest, [1,2,3], 3) -> dest = [1,2,3]
 */
void arrayCopy(int *dest, const int *src, int size);

/* Задание 8: Сортировка пузырьком (0.5 балла)
 * Отсортировать массив по возрастанию
 * Пример: bubbleSort([5,3,1,4,2], 5) -> [1,2,3,4,5]
 */
void bubbleSort(int *arr, int size);

/* Задание 9: Циклический сдвиг влево на k позиций (0.5 балла)
 * Пример: rotateLeft([1,2,3,4,5], 5, 2) -> [3,4,5,1,2]
 */
void rotateLeft(int *arr, int size, int k);

/* Задание 10: Слияние двух отсортированных массивов (0.5 балла)
 * Результат записывается в result (память уже выделена вызывающим)
 * Пример: mergeSorted([1,3,5], 3, [2,4,6], 3, result) -> [1,2,3,4,5,6]
 */
void mergeSorted(const int *a, int sizeA, const int *b, int sizeB, int *result);

/* Задание 11: Удалить дубликаты из отсортированного массива (0.5 балла)
 * Модифицирует массив на месте, возвращает новый размер
 * Пример: removeDuplicates([1,1,2,3,3], 5) -> arr=[1,2,3,...], return 3
 */
int removeDuplicates(int *arr, int size);

/* Задание 12: Второй по величине элемент (1 балл)
 * Если все элементы одинаковые, вернуть этот элемент
 * Пример: secondLargest([3,1,4,1,5,9], 6) -> 5
 */
int secondLargest(const int *arr, int size);

/* Задание 13: Проверить, отсортирован ли массив по неубыванию (1 балл)
 * Пример: isSorted([1,2,3,4,5], 5) -> true
 *         isSorted([1,3,2,4,5], 5) -> false
 */
bool isSorted(const int *arr, int size);

/* Задание 14: Частота самого частого элемента (1 балл)
 * Вернуть количество вхождений самого частого элемента
 * Пример: maxFrequency([1,3,2,3,3,1], 6) -> 3  (элемент 3 встречается 3 раза)
 */
int maxFrequency(const int *arr, int size);

/* Задание 15: Найти два элемента с заданной суммой (1.5 балла)
 * Вернуть динамически выделенный массив из двух индексов (malloc)
 * Если пара не найдена, вернуть NULL
 * Вызывающий отвечает за освобождение памяти (free)
 * Пример: twoSum([2,7,11,15], 4, 9) -> [0,1]  (arr[0]+arr[1]=9)
 */
int *twoSum(const int *arr, int size, int target);

// ============== СЛОЖНЫЕ ЗАДАНИЯ (5 заданий, 3-5 баллов) ==============

/* Задание 16: Фильтрация положительных элементов (3 балла)
 * Создать новый массив (malloc), содержащий только положительные элементы
 * Записать размер результата в *resultSize
 * Если положительных нет, вернуть NULL и *resultSize = 0
 * Пример: filterPositive([-1,2,-3,4,5], 5, &sz) -> [2,4,5], sz=3
 */
int *filterPositive(const int *arr, int size, int *resultSize);

/* Задание 17: Транспонирование матрицы (3 балла)
 * Матрица хранится в одномерном массиве построчно (row-major order)
 * Вернуть новую транспонированную матрицу (malloc)
 * Пример: matrix=[1,2,3,4,5,6], rows=2, cols=3
 *         результат=[1,4,2,5,3,6] (3 строки, 2 столбца)
 */
int *matrixTranspose(const int *matrix, int rows, int cols);

/* Задание 18: Обход матрицы по спирали (4 балла)
 * Матрица хранится построчно. Вернуть элементы в порядке спирального обхода
 * (по часовой стрелке, начиная с верхнего левого угла)
 * Вернуть динамически выделенный массив (malloc), записать размер в *resultSize
 * Пример: matrix=[1,2,3, 4,5,6, 7,8,9], rows=3, cols=3
 *         результат=[1,2,3,6,9,8,7,4,5]
 */
int *spiralOrder(const int *matrix, int rows, int cols, int *resultSize);

/* Задание 19: Разбиение строки по разделителю (5 баллов)
 * Разбить строку на подстроки по заданному символу-разделителю
 * Вернуть массив строк (каждая выделена через malloc)
 * Сам массив указателей тоже выделен через malloc
 * Записать количество подстрок в *count
 * Пример: stringSplit("hello,world,test", ',', &count)
 *         -> ["hello","world","test"], count=3
 */
char **stringSplit(const char *str, char delimiter, int *count);

/* Задание 20: Умножение полиномов (5 баллов)
 * Полиномы представлены массивами коэффициентов: a[i] = коэффициент при x^i
 * Вернуть новый массив (malloc) — результат умножения
 * Размер результата: sizeA + sizeB - 1, записать в *resultSize
 * Пример: a=[1,2], b=[3,4] -> [3,10,8]
 *   (1+2x)*(3+4x) = 3 + 10x + 8x^2
 */
int *polynomialMultiply(const int *a, int sizeA, const int *b, int sizeB,
                        int *resultSize);

#ifdef __cplusplus
}
#endif

#endif // STUDENT_TASKS_H
